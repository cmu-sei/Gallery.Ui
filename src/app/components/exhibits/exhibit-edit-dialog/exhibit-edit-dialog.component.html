<!--
Copyright 2021 Carnegie Mellon University. All Rights Reserved.
Released under a MIT (SEI)-style license. See LICENSE.md in the project root for license information.
-->

@if (!!data && data.exhibit !== undefined && data.exhibit !== null) {
  <div
    mat-dialog-content
    >
    <div class="add-margin">
      <div>
        <mat-form-field class="full-width">
          <input
            type="text"
            matInput
            [formControl]="exhibitNameFormControl"
            placeholder="Name (required)"
            (blur)="saveExhibit('name')"
            value="{{ data.exhibit.name }}"
            [errorStateMatcher]="matcher"
            />
          @if (exhibitNameFormControl.hasError('minlength')) {
            <mat-error>
              Name is <strong>required</strong>!
            </mat-error>
          }
          @if (exhibitNameFormControl.hasError('required')) {
            <mat-error>
              Name is <strong>required</strong>
            </mat-error>
          }
        </mat-form-field>
      </div>
    </div>
    <div class="add-margin">
      <div>
        <mat-form-field class="full-width">
          <textarea
            matInput
            placeholder="Exhibit Description (required)"
            [formControl]="descriptionFormControl"
            (blur)="saveExhibit('description')"
            value="{{ data.exhibit.description }}"
            [errorStateMatcher]="matcher"
          ></textarea>
          @if (descriptionFormControl.hasError('required')) {
            <mat-error>
              Description is <strong>required</strong>
            </mat-error>
          }
        </mat-form-field>
      </div>
    </div>
    <div class="add-margin">
      <div>
        <mat-form-field>
          <mat-select
            placeholder="View"
            [(ngModel)]="data.exhibit.viewId"
            (selectionChange)="saveExhibit('view')"
            >
            <mat-option>None</mat-option>
            @for (view of data.views; track view) {
              <mat-option
                [value]="view.id"
                [matTooltip]="view.id"
                matTooltipPosition="right"
                >
                {{ view.name }}
              </mat-option>
            }
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    <div class="add-margin">
      <div>
        <mat-form-field>
          <input
            matInput
            placeholder="Start Date / Time"
            [formControl]="startDateFormControl"
            (inputChange)="saveExhibit('startDate')"
            (dateChange)="saveExhibit('startDate')"
            />
        </mat-form-field>
      </div>
    </div>
    <div class="add-margin">
      <div>
        <mat-form-field>
          <input
            matInput
            placeholder="End Date / Time"
            [formControl]="endDateFormControl"
            (inputChange)="saveExhibit('endDate')"
            (dateChange)="saveExhibit('endDate')"
            />
        </mat-form-field>
      </div>
    </div>
    <div class="cssLayoutRowStartCenter bottom-button">
      <div class="delete-button">
        <button
          mat-stroked-button
          (click)="handleEditComplete(true)"
          [disabled]="!errorFree()"
          style="margin-left: 40px"
          >
          Save
        </button>
      </div>
      <div class="delete-button">
        <button mat-stroked-button (click)="handleEditComplete(false)">
          Cancel
        </button>
      </div>
    </div>
  </div>
}
